"use strict";(self.webpackChunkclouding_frontend=self.webpackChunkclouding_frontend||[]).push([[896],{47896:(e,s,t)=>{t.r(s),t.d(s,{default:()=>g});var a=t(47313),l=t(10807),r=t(2135),n=t(46417);function o(e){let{itemId:s,avatarUrl:t,username:a,phone:o}=e;return(0,n.jsxs)("div",{className:"d-flex align-items-center cursor-pointer",children:[(0,n.jsx)(r.rU,{to:"",target:"_blank",className:"avatar",children:(0,n.jsx)(l.qE,{image:t,className:"imgCover"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)(r.rU,{to:"",target:"_blank",className:"mb-1 text-dark d-block",children:a}),(0,n.jsx)("a",{className:"colorN4 font13",href:"tel:+".concat(o),children:o})]})]})}const i=e=>{let{item:s,setEditedItemId:t,archiveMutation:a}=e;return(0,n.jsxs)("div",{className:"tableRow",children:[(0,n.jsx)("div",{className:"tableCell py-3 ps-2 roundedLeft",children:(0,n.jsx)(o,{itemId:null===s||void 0===s?void 0:s.id,avatarUrl:null===s||void 0===s?void 0:s.avatarUrl,username:null===s||void 0===s?void 0:s.username})}),(0,n.jsx)("div",{className:"tableCell",children:null===s||void 0===s?void 0:s.email}),(0,n.jsx)("div",{className:"tableCell",children:null===s||void 0===s?void 0:s.phone}),(0,n.jsx)("div",{className:"tableCell roundedRight",children:(0,n.jsx)(l.Cg,{itemId:null===s||void 0===s?void 0:s.id,name:"user",setEditedItemId:t,archiveMutation:a})})]})},d=e=>{let{listUsers:s,isSuccess:t,isLoading:a,totalPage:r,setEditedItemId:o,archiveMutation:d}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"tableOuter",children:[(0,n.jsxs)("div",{className:"tableContainer",children:[(0,n.jsxs)("div",{className:"tableHead",children:[(0,n.jsx)("div",{className:"tableCell pb-4",children:"Name"}),(0,n.jsx)("div",{className:"tableCell",children:"Mail"}),(0,n.jsx)("div",{className:"tableCell",children:"Phone"}),(0,n.jsx)("div",{className:"tableCell"})]}),t&&s.map((e=>(0,n.jsx)(i,{item:e,setEditedItemId:o,archiveMutation:d},e.id)))]}),t&&0===s.length&&(0,n.jsx)(l.Jd,{})]}),(t&&0!==s.length||a)&&(0,n.jsx)(l.tl,{pageCount:r||5})]})};var c=t(13489),u=t(75627),m=t(42161),h=t(63849),p=t(31616),v=t(95483);const x=e=>{let{title:s="",method:t,handleSubmit:a,onLoading:r,onClose:o,userInfo:i}=e;return(0,n.jsx)(u.RV,{...t,children:(0,n.jsxs)("form",{onSubmit:t.handleSubmit(a),sm:12,md:6,children:[(0,n.jsxs)(v.Z,{title:s,className:"pb-4 borderBottom",classTitle:"title-green",children:[(0,n.jsx)(l.LX,{name:"username",label:"Username",type:"text",placeholder:"Enter username",tooltip:"Username is required",defaultValue:i?i.username:""}),(0,n.jsx)(l.LX,{name:"email",label:"Email",type:"text",placeholder:"Enter email",tooltip:"Please enter correct email format",defaultValue:i?i.email:""}),(0,n.jsx)(l.LX,{name:"phone",label:"Phone",type:"phone",placeholder:"Enter phone number",tooltip:"Phone number is required",defaultValue:i?i.phone:""}),(0,n.jsx)(l.jb,{name:"is_organization_admin",defaultValue:"Select role",content:"Is Organization Admin",tooltip:"Role for user"})]}),(0,n.jsx)(v.Z,{title:"Update Password",className:"py-4 borderBottom",classTitle:"title-purple",children:(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(p.Z,{children:(0,n.jsx)(l.LX,{tooltip:"New password is required",label:"New password",name:"new_password",placeholder:"Enter new password",type:"password"})}),(0,n.jsx)(p.Z,{sm:12,md:6,children:(0,n.jsx)(l.LX,{tooltip:"Confirm new password is required",label:"Confirm new password",name:"confirm_password",placeholder:"Enter confirm new password",type:"password"})})]})}),(0,n.jsxs)("div",{className:"pt-5 d-flex justify-content-end align-items-center",children:[(0,n.jsx)("div",{children:(0,n.jsx)("p",{onClick:o,className:"button-white me-2",children:"Cancel"})}),(0,n.jsx)("div",{children:(0,n.jsx)(l.Z6,{threeDotsWidth:"20",threeDotsHeight:"20",type:"submit",className:"button px-4",value:"Save",notMaxWidth:!0,loading:!1})})]})]})})};var j=t(23560);const f=e=>{let{onClose:s}=e;const{addUserMutation:t}=(0,m.OE)({onClose:s}),a=(0,u.cI)({});return(0,n.jsx)(x,{title:"Add User",method:a,handleSubmit:e=>{t.mutate(e,{onSuccess:()=>{s()},onError:e=>{console.log("error",e.response.data.error),j.Am.error(e.response.data.error,{autoClose:5e3})}})},onLoading:!1,onClose:s})},b=e=>{let{editedItemId:s,onClose:t}=e;const{editUserMutation:l}=(0,m.OE)(),r=(0,u.cI)({});return(0,a.useEffect)((()=>{(async()=>{try{const e=(await(0,c.PR)(s)).data.data.users;r.reset(e)}catch(e){console.error("Error fetching user data:",e)}})()}),[s,r]),(0,n.jsx)(x,{title:"Edit User",method:r,handleSubmit:e=>{l.mutate(e,{onSuccess:()=>{t()},onError:e=>{console.log("error",e.response.data.error),j.Am.error(e.response.data.error,{autoClose:5e3})}})},onLoading:!1,onClose:t})},g=()=>{const[e,s]=(0,a.useState)(!1),[t,r]=(0,a.useState)(void 0),{listUsers:o,pagination:i,isSuccess:u,isLoading:h}=(0,m.OE)(),{archivedList:p,isSuccess:v,isLoading:x,search:j,handleSearch:g,archiveMutation:N,unarchiveMutation:C}=(0,m.eC)({archivedObject:{listArchivedAPI:c.q6,archiveAPI:c.Ji,unarchiveAPI:c.Ei,keyArchivistList:"user-archivist-list",keyList:"users",title:"User"}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.u_,{outerClassName:"outerModal",visible:e||"undefined"!==typeof t,onClose:()=>{s(!1),r(void 0)},children:[e&&(0,n.jsx)(f,{onClose:()=>s(!1)}),"undefined"!==typeof t&&(0,n.jsx)(b,{editedItemId:t,onClose:()=>r(void 0)})]}),(0,n.jsx)(l.Zb,{title:"".concat(u?null===i||void 0===i?void 0:i.total:"-"," Users"),classTitle:"title-purple",head:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.HK,{placeholder:"Search by name"}),(0,n.jsxs)("div",{className:"d-flex",children:[(0,n.jsx)(l.i6,{handleClickAdd:()=>s(!0),titleButton:"Add User",className:"me-2"}),(0,n.jsx)(l.kg,{title:"Archived users",name:"users",archivedList:p,isSuccess:v,isLoading:x,search:j,handleSearch:g,unarchiveMutation:C})]})]}),children:(0,n.jsx)(d,{listUsers:o,isSuccess:u,isLoading:h,totalPage:null===i||void 0===i?void 0:i.totalPage,setEditedItemId:r,archiveMutation:N})})]})}},31616:(e,s,t)=>{t.d(s,{Z:()=>d});var a=t(46123),l=t.n(a),r=t(47313),n=t(68524),o=t(46417);const i=r.forwardRef(((e,s)=>{const[{className:t,...a},{as:r="div",bsPrefix:i,spans:d}]=function(e){let{as:s,bsPrefix:t,className:a,...r}=e;t=(0,n.vE)(t,"col");const o=(0,n.pi)(),i=(0,n.zG)(),d=[],c=[];return o.forEach((e=>{const s=r[e];let a,l,n;delete r[e],"object"===typeof s&&null!=s?({span:a,offset:l,order:n}=s):a=s;const o=e!==i?"-".concat(e):"";a&&d.push(!0===a?"".concat(t).concat(o):"".concat(t).concat(o,"-").concat(a)),null!=n&&c.push("order".concat(o,"-").concat(n)),null!=l&&c.push("offset".concat(o,"-").concat(l))})),[{...r,className:l()(a,...d,...c)},{as:s,bsPrefix:t,spans:d}]}(e);return(0,o.jsx)(r,{...a,ref:s,className:l()(t,!d.length&&i)})}));i.displayName="Col";const d=i},63849:(e,s,t)=>{t.d(s,{Z:()=>d});var a=t(46123),l=t.n(a),r=t(47313),n=t(68524),o=t(46417);const i=r.forwardRef(((e,s)=>{let{bsPrefix:t,className:a,as:r="div",...i}=e;const d=(0,n.vE)(t,"row"),c=(0,n.pi)(),u=(0,n.zG)(),m="".concat(d,"-cols"),h=[];return c.forEach((e=>{const s=i[e];let t;delete i[e],null!=s&&"object"===typeof s?({cols:t}=s):t=s;const a=e!==u?"-".concat(e):"";null!=t&&h.push("".concat(m).concat(a,"-").concat(t))})),(0,o.jsx)(r,{ref:s,...i,className:l()(a,d,...h)})}));i.displayName="Row";const d=i}}]);